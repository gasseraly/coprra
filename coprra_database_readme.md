# CopRRA Database Installation Guide

## ๐๏ธ ูุงุนุฏุฉ ุจูุงูุงุช CopRRA ุงููุญุณูุฉ

### ๐ ูุธุฑุฉ ุนุงูุฉ
ูุฐุง ุงูููู ูุญุชูู ุนูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ุงููุญุณูุฉ ููููุน CopRRA ูุน ุฏุนู ูุงูู ูููุฒุงุช ุงูุฐูุงุก ุงูุงุตุทูุงุนู.

### ๐ฆ ุงููููุงุช ุงููุฑููุฉ
1. **`coprra_ai_enhanced_database.sql`** - ูุงุนุฏุฉ ุงูุจูุงูุงุช ุงูุฑุฆูุณูุฉ ุงููุญุณูุฉ
2. **`database_users_tables.sql`** - ุฌุฏุงูู ุงููุณุชุฎุฏููู ุงูุฃุณุงุณูุฉ

### ๐ ุงูุชุซุจูุช

#### ุงูุฎุทูุฉ 1: ุฅูุดุงุก ูุงุนุฏุฉ ุงูุจูุงูุงุช
```sql
-- ุฅูุดุงุก ูุงุนุฏุฉ ุงูุจูุงูุงุช
CREATE DATABASE `coprra_ai` 
CHARACTER SET utf8mb4 
COLLATE utf8mb4_unicode_ci;

-- ุงุณุชุฎุฏุงู ูุงุนุฏุฉ ุงูุจูุงูุงุช
USE `coprra_ai`;
```

#### ุงูุฎุทูุฉ 2: ุงุณุชูุฑุงุฏ ูุงุนุฏุฉ ุงูุจูุงูุงุช ุงูุฃุณุงุณูุฉ
```bash
# ุงุณุชูุฑุงุฏ ุฌุฏุงูู ุงููุณุชุฎุฏููู ุงูุฃุณุงุณูุฉ
mysql -u root -p coprra_ai < database_users_tables.sql
```

#### ุงูุฎุทูุฉ 3: ุงุณุชูุฑุงุฏ ูุงุนุฏุฉ ุงูุจูุงูุงุช ุงููุญุณูุฉ
```bash
# ุงุณุชูุฑุงุฏ ูุงุนุฏุฉ ุงูุจูุงูุงุช ุงููุงููุฉ
mysql -u root -p coprra_ai < coprra_ai_enhanced_database.sql
```

### ๐๏ธ ุงูุฌุฏุงูู ุงูุฌุฏูุฏุฉ

#### ุฌุฏุงูู ุงูุฐูุงุก ุงูุงุตุทูุงุนู
- **`ai_conversations`** - ูุญุงุฏุซุงุช ุงูุฐูุงุก ุงูุงุตุทูุงุนู
- **`ai_responses`** - ุฑุฏูุฏ ุงูุฐูุงุก ุงูุงุตุทูุงุนู
- **`ai_feedback`** - ุชููููุงุช ุงููุณุชุฎุฏููู
- **`search_queries`** - ุงุณุชุนูุงูุงุช ุงูุจุญุซ
- **`user_preferences`** - ุชูุถููุงุช ุงููุณุชุฎุฏููู
- **`ai_recommendations`** - ุงูุชูุตูุงุช ุงูุฐููุฉ
- **`ai_content_generation`** - ุงููุญุชูู ุงูููููุฏ ุชููุงุฆูุงู
- **`ai_image_generation`** - ุงูุตูุฑ ุงูููููุฏุฉ ุชููุงุฆูุงู
- **`ai_shopping_assistant`** - ูุณุงุนุฏ ุงูุชุณูู ุงูุฐูู
- **`ai_seo_optimization`** - ุชุญุณูู ูุญุฑูุงุช ุงูุจุญุซ
- **`ai_affiliate_integration`** - ุชูุงูู ุงูุฃููููุช
- **`ai_analytics`** - ุงูุชุญูููุงุช ุงูุฐููุฉ

### ๐ง ุงูุฅุนุฏุงุฏุงุช ุงููุทููุจุฉ

#### ุฅุนุฏุงุฏุงุช MySQL
```sql
-- ุงูุชุฃูุฏ ูู ุฏุนู UTF8MB4
SHOW VARIABLES LIKE 'character_set%';
SHOW VARIABLES LIKE 'collation%';

-- ุชุนููู ุงูุชุฑููุฒ ุงูุงูุชุฑุงุถู
SET NAMES utf8mb4;
SET CHARACTER SET utf8mb4;
SET collation_connection = 'utf8mb4_unicode_ci';
```

#### ุตูุงุญูุงุช ุงููุณุชุฎุฏู
```sql
-- ุฅูุดุงุก ูุณุชุฎุฏู ุฌุฏูุฏ
CREATE USER 'coprra_user'@'localhost' IDENTIFIED BY 'your_secure_password';

-- ููุญ ุงูุตูุงุญูุงุช
GRANT ALL PRIVILEGES ON coprra_ai.* TO 'coprra_user'@'localhost';
FLUSH PRIVILEGES;
```

### ๐ ุงููุดุงูุฏ (Views)

#### ูุดุงูุฏ ุงูุชุญูููุงุช
- **`v_ai_conversation_analytics`** - ุชุญูููุงุช ุงููุญุงุฏุซุงุช
- **`v_search_query_analytics`** - ุชุญูููุงุช ุงูุจุญุซ
- **`v_user_preference_insights`** - ุฑุคู ุชูุถููุงุช ุงููุณุชุฎุฏููู
- **`v_ai_recommendation_performance`** - ุฃุฏุงุก ุงูุชูุตูุงุช
- **`v_ai_content_generation_quality`** - ุฌูุฏุฉ ุงููุญุชูู ุงูููููุฏ

### ๐๏ธ ุงูุฅุฌุฑุงุกุงุช ุงููุฎุฒูุฉ (Stored Procedures)

#### ุงูุฅุฌุฑุงุกุงุช ุงูุฑุฆูุณูุฉ
- **`GetConversationContext`** - ุงูุญุตูู ุนูู ุณูุงู ุงููุญุงุฏุซุฉ
- **`UpdateUserPreferences`** - ุชุญุฏูุซ ุชูุถููุงุช ุงููุณุชุฎุฏู
- **`GenerateAIRecommendations`** - ุชูููุฏ ุงูุชูุตูุงุช ุงูุฐููุฉ
- **`LogAIIteraction`** - ุชุณุฌูู ุชูุงุนู ุงูุฐูุงุก ุงูุงุตุทูุงุนู

### ๐ ุงููุญูุฒุงุช (Triggers)

#### ุงููุญูุฒุงุช ุงูุชููุงุฆูุฉ
- **`tr_ai_conversation_preferences`** - ุชุญุฏูุซ ุงูุชูุถููุงุช ุนูุฏ ุงููุญุงุฏุซุฉ
- **`tr_search_query_analytics`** - ุชุญุฏูุซ ุฅุญุตุงุฆูุงุช ุงูุจุญุซ

### ๐ ุงูููุงุฑุณ (Indexes)

#### ููุงุฑุณ ุงูุฃุฏุงุก
- ููุงุฑุณ ูุฑูุจุฉ ูููุญุงุฏุซุงุช ูุงูุจุญุซ
- ููุงุฑุณ ููุชุตูููุงุช ูุงูุนูุงูุงุช ุงูุชุฌุงุฑูุฉ
- ููุงุฑุณ ููุชูุงุฑูุฎ ูุงูููุช
- ููุงุฑุณ ููุฌูุฏุฉ ูุงูุซูุฉ

### ๐งช ุงุฎุชุจุงุฑ ูุงุนุฏุฉ ุงูุจูุงูุงุช

#### ุงุฎุชุจุงุฑ ุงูุงุชุตุงู
```bash
mysql -u coprra_user -p coprra_ai -e "SELECT 'Database connection successful!' as status;"
```

#### ุงุฎุชุจุงุฑ ุงูุฌุฏุงูู
```sql
-- ุนุฑุถ ุฌููุน ุงูุฌุฏุงูู
SHOW TABLES;

-- ุนุฑุถ ูููู ุฌุฏูู ุงููุญุงุฏุซุงุช
DESCRIBE ai_conversations;

-- ุงุฎุชุจุงุฑ ุฅุฏุฑุงุฌ ุจูุงูุงุช
INSERT INTO ai_conversations (session_id, message, language, mode) 
VALUES ('test_session', 'ุฑุณุงูุฉ ุงุฎุชุจุงุฑ', 'ar', 'general');

-- ุงูุชุญูู ูู ุงูุฅุฏุฑุงุฌ
SELECT * FROM ai_conversations WHERE session_id = 'test_session';
```

### ๐ ุงูุฃูุงู

#### ุฅุนุฏุงุฏุงุช ุงูุฃูุงู
- ุชุดููุฑ ูููุงุช ุงููุฑูุฑ
- ุตูุงุญูุงุช ูุญุฏูุฏุฉ ูููุณุชุฎุฏููู
- ุงุณุชุนูุงูุงุช ููุนุฏุฉ ูุณุจูุงู
- ุญูุงูุฉ ูู SQL Injection

#### ุงููุณุฎ ุงูุงุญุชูุงุทู
```bash
# ูุณุฎ ุงุญุชูุงุทู ูููู
mysqldump -u root -p coprra_ai > backup_$(date +%Y%m%d).sql

# ูุณุฎ ุงุญุชูุงุทู ูุน ุงูุถุบุท
mysqldump -u root -p coprra_ai | gzip > backup_$(date +%Y%m%d).sql.gz
```

### ๐ ุงููุฑุงูุจุฉ

#### ูุฑุงูุจุฉ ุงูุฃุฏุงุก
```sql
-- ูุฑุงูุจุฉ ุญุฌู ูุงุนุฏุฉ ุงูุจูุงูุงุช
SELECT 
    table_schema AS 'Database',
    ROUND(SUM(data_length + index_length) / 1024 / 1024, 2) AS 'Size (MB)'
FROM information_schema.tables 
WHERE table_schema = 'coprra_ai'
GROUP BY table_schema;

-- ูุฑุงูุจุฉ ุงูุฌุฏุงูู ุงููุจูุฑุฉ
SELECT 
    table_name,
    ROUND(((data_length + index_length) / 1024 / 1024), 2) AS 'Size (MB)'
FROM information_schema.tables 
WHERE table_schema = 'coprra_ai'
ORDER BY (data_length + index_length) DESC;
```

### ๐จ ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

#### ูุดุงูู ุดุงุฆุนุฉ
1. **ุฎุทุฃ ูู ุงูุชุฑููุฒ**: ุชุฃูุฏ ูู ุงุณุชุฎุฏุงู UTF8MB4
2. **ุฎุทุฃ ูู ุงูุตูุงุญูุงุช**: ุชุฃูุฏ ูู ุตูุงุญูุงุช ุงููุณุชุฎุฏู
3. **ุฎุทุฃ ูู ุงูุฅุฌุฑุงุกุงุช ุงููุฎุฒูุฉ**: ุชุฃูุฏ ูู ุฏุนู MySQL 8.0+

#### ุญููู ุณุฑูุนุฉ
```sql
-- ุฅุนุงุฏุฉ ุชุนููู ุงูุชุฑููุฒ
ALTER DATABASE coprra_ai CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;

-- ุฅุนุงุฏุฉ ุฅูุดุงุก ุงูุฅุฌุฑุงุกุงุช ุงููุฎุฒูุฉ
SOURCE coprra_ai_enhanced_database.sql;
```

### ๐ ุงูุฏุนู

ูููุณุงุนุฏุฉ ูู ุฅุนุฏุงุฏ ูุงุนุฏุฉ ุงูุจูุงูุงุช:
- **ุงูุจุฑูุฏ ุงูุฅููุชุฑููู**: contact@coprra.com
- **ุงูุชูุซูู**: [ุฑุงุจุท ุงูุชูุซูู]
- **GitHub Issues**: [ุฑุงุจุท ุงููุณุชูุฏุน]

---

**ุชู ุงูุชุทููุฑ ุจูุงุณุทุฉ ูุฑูู CopRRA** ๐

*ุขุฎุฑ ุชุญุฏูุซ: ุฏูุณูุจุฑ 2024*